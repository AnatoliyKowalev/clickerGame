(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{403:function(e,t,n){"use strict";n.d(t,"h",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return p})),n.d(t,"i",(function(){return m})),n.d(t,"j",(function(){return f})),n.d(t,"e",(function(){return d})),n.d(t,"a",(function(){return h})),n.d(t,"g",(function(){return y}));n(1);var r=n(76),a=n(17),c=(n(113),n(407),n(111),n(411),n(404));function o(e,t,n,r,a,c,o){try{var i=e[c](o),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}var i=function(e){return function(t){t({type:a.k,payload:e||!r.a.getState().players.formPlayersEditing})}},s=function(){return function(e){e({type:a.e,payload:{circle:++r.a.getState().players.gameSchema.circle}}),h()}},u=function(e){return function(t){t({type:a.h,payload:e})}},l=function(e){return function(t){var n=r.a.getState().players.gameSchema.players;n=n.map((function(t){return t.playerId===e?(t.bafs.forEach((function(e){switch(e.id){case 2:t.bafsObj.extraAtack+=2;break;case 3:t.bafsObj.extraPercent-=7;break;case 4:t.bafsObj.extraPercent+=5;break;case 6:t.bafsObj.extraAtack-=3;break;case 7:t.bafsObj.extraSpeed+=9;break;case 8:t.bafsObj.extraAtack-=3.5;break;case 9:t.bafsObj.extraPercent-=6;break;case 10:t.bafsObj.extraAtack+=2;break;case 11:t.bafsObj.extraPercent+=5;break;case 13:t.bafsObj.extraPercent-=13;break;case 14:t.bafsObj.extraAtack+=4;break;case 16:t.bafsObj.extraPercent+=10;break;case 18:t.bafsObj.extraAtack+=2.7;break;case 19:t.bafsObj.extraAtack+=3.2}})),t.bafs=[],t):t})),t({type:a.g,payload:e})}},p=function(e,t){return function(n){var c=r.a.getState().players.gameSchema.players;c=c.map((function(n){return n.playerId===e?(n.health-=t,n):n})),n({type:a.b,payload:c})}},m=function(e){return function(t){t({type:a.f,payload:e})}},f=function(e,t,n){return function(c){var o=r.a.getState().players.gameSchema.players;t.circle=n,o.map((function(n){return n.playerId===e?(n.gameHistory.unshift(t),n.bafsObj.extraAtack=0,n.bafsObj.extraPercent=0,n.bafsObj.extraSpeed=0,n):n})),c({type:a.l,payload:o}),c({type:a.d,payload:e})}},d=function(e,t){return function(n){var c=r.a.getState().players.gameSchema.players;c=c.map((function(n){return n.playerId===e?(n.bafs.unshift(t),n.bafs.forEach((function(e,t){switch(e.id){case 0:case 5:n.health+=1;break;case 12:n.health+=2;break;case 1:case 15:case 17:n.health-=1}})),n):n})),n({type:a.a,payload:c})}},h=function(){return function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.getState().players.gameSchema.players;case 2:return n=e.sent,e.next=5,r.a.getState().players.gameSchema.diedPlayers;case 5:return o=e.sent,e.next=8,n.map((function(e){e.health<=0&&!o.includes(e.playerId)&&t({type:a.c,payload:e.playerId})}));case 8:return e.next=10,n.length;case 10:e.t0=e.sent,e.t1=r.a.getState().players.gameSchema.diedPlayers.length,(i=e.t0-e.t1)<=1&&Object(c.b)(i);case 14:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function i(e){o(c,r,a,i,s,"next",e)}function s(e){o(c,r,a,i,s,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()},y=function(e){return function(t){t({type:a.i,payload:e})}}},404:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return l}));var r=n(405),a=n(76),c=n(403);function o(e,t,n,r,a,c,o){try{var i=e[c](o),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}var i=[{id:0,kind:"health",name:"+ 1 HEALTH",icon:r.G},{id:1,kind:"health",name:"- 1 HEALTH",icon:r.H},{id:2,kind:"atack",name:"Тебя укусил паук, и ты стал человеком-пауком. Твоя получил +2 к силе!",icon:r.S},{id:3,kind:"percent",name:"Ты немного ослеп, и по этому сбился с пути, по этому путь который ты пройдешь увеличился на 7%.",icon:r.h},{id:4,kind:"percent",name:"Ух ты! Профессор с людей Х согласился тебе помочь и подбросил тебя ближе к выходу на 5%",icon:r.h},{id:5,kind:"health",name:"Мимо проезжала скорая, и подкинуло одно лишнее сердечко, теперь у тебя +1 сердце",icon:r.b},{id:6,kind:"atack",name:"Ты в баре выпил какую-то жижу и теперь тебе поплохело, твоя сила упала на 3",icon:r.a},{id:7,kind:"speed",name:"Следующий раз полоса дороги будет убывать так же медленно, как работает адроид, то-есть очень медленно",icon:r.P},{id:8,kind:"atack",name:"Ты нарвался на злого деда, и он тебе надавал по коленям своим костылем, теперь ты медленно побежишь",icon:r.c},{id:9,kind:"percent",name:"На твоем пути появилась мамочка с коляской, тебе придется ее оббежать, это +6% к твоей дороге",icon:r.e},{id:10,kind:"atack",name:"Ты хорошо выспался и по этому сильнее, +2 к силе",icon:r.f},{id:11,kind:"percent",name:"Пока ты бежал, тебе догнал какой-то байкер и подбросил, -5% к дороге",icon:r.g},{id:12,kind:"health",name:"Ля какая вкусная и полезная морковочка, она добавила тебе +2 жизни",icon:r.j},{id:13,kind:"percent",name:"Черная кошка перебежала тебе дорогу, а ты суеверный, придется оббегать +10% к дороге",icon:r.k},{id:14,kind:"atack",name:"Вышло солнышко, зарядило тебя силой, +3к силе",icon:r.l},{id:15,kind:"health",name:"Тебя сбил истрибитель, упс... -1 жизнь",icon:r.t},{id:16,kind:"percent",name:"Ты встретил доброго Сергея, он подсказал тебе как сократить дорогу. -10% к дороге",icon:r.R},{id:17,kind:"health",name:"На тебя упал метеорит. -1 жизнь",icon:r.J},{id:18,kind:"atack",name:"Ммм.. пица! Скував ее ты стал сильнее!",icon:r.L},{id:19,kind:"atack",name:"Ты искупался в чернобыльской речке, и у тебя выросло еще 3 ноги, теперь ты быстрее бегаешь",icon:r.M}],s=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.a.getState().players.gameSchema.players,r=[],n.map((function(e,t){var n={};n.playerId=e.playerId,n.hp=e.health,n.icon=e.icon,n.name=e.name,n.gameHistory=e.gameHistory,n.gs=0,r.push(n)})),r=r.map((function(e){return e.gs+=1e3*e.hp,e.gameHistory.forEach((function(t){e.gs+=t.clicks>0?t.clicks/-10:-30})),e})),e.next=6,a.a.dispatch(Object(c.g)(r));case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function i(e){o(c,r,a,i,s,"next",e)}function s(e){o(c,r,a,i,s,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),u=function(e,t){return Math.round(Math.random()*(e+t))},l=[r.k,r.m,r.z,r.Q,r.S,r.p,r.q,r.r,r.u,r.x,r.I,r.K,r.c,r.d,r.h,r.i,r.o,r.s,r.w,r.y,r.A,r.B,r.C,r.D,r.E,r.F]},408:function(e,t){},409:function(e,t){},410:function(e,t){},444:function(e,t,n){"use strict";var r=n(1),a=n.n(r),c=n(2),o=n.n(c),i=n(16),s=n.n(i),u=n(32),l=n.n(u),p=n(114),m=n(116),f=n.n(m),d={},h=0,y=function(e){var t=e,n=d[t]||(d[t]={});if(n[e])return n[e];var r=f.a.compile(e);return h<1e4&&(n[e]=r,h++),r},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("/"===e)return e;var n=y(e);return n(t,{pretty:!0})},g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var S=function(e){function t(){return v(this,t),k(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},t.prototype.componentWillMount=function(){l()(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},t.prototype.componentDidMount=function(){this.isStatic()||this.perform()},t.prototype.componentDidUpdate=function(e){var t=Object(p.b)(e.to),n=Object(p.b)(this.props.to);Object(p.c)(t,n)?s()(!1,"You tried to redirect to the same route you're currently on: \""+n.pathname+n.search+'"'):this.perform()},t.prototype.computeTo=function(e){var t=e.computedMatch,n=e.to;return t?"string"==typeof n?b(n,t.params):g({},n,{pathname:b(n.pathname,t.params)}):n},t.prototype.perform=function(){var e=this.context.router.history,t=this.props.push,n=this.computeTo(this.props);t?e.push(n):e.replace(n)},t.prototype.render=function(){return null},t}(a.a.Component);S.propTypes={computedMatch:o.a.object,push:o.a.bool,from:o.a.string,to:o.a.oneOfType([o.a.string,o.a.object]).isRequired},S.defaultProps={push:!1},S.contextTypes={router:o.a.shape({history:o.a.shape({push:o.a.func.isRequired,replace:o.a.func.isRequired}).isRequired,staticContext:o.a.object}).isRequired};var O=S;t.a=O},447:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(112),o=n(111),i=n(403),s=n(444),u=n(412),l=n(445),p=n(404);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n,r,a,c,o){try{var i=e[c](o),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){h(c,r,a,o,i,"next",e)}function i(e){h(c,r,a,o,i,"throw",e)}o(void 0)}))}}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(12)]).then(n.bind(null,415))})),P=Object(r.lazy)((function(){return n.e(11).then(n.bind(null,440))})),j=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=g(t).call(this,e),n=!a||"object"!==m(a)&&"function"!=typeof a?v(r):a,S(v(n),"setBonuses",y(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.players,e.next=3,t.gameSchema.players[n.state.currentPlayer].bafsObj.extraAtack;case 3:return r=e.sent,e.next=6,t.gameSchema.players[n.state.currentPlayer].bafsObj.extraSpeed;case 6:a=e.sent,n.setState(d({},n.state,{bonus:d({},n.state.bonus,{atack:r,speed:a})}));case 8:case"end":return e.stop()}}),e)})))),S(v(n),"startRound",y(regeneratorRuntime.mark((function e(){var t,r,a,c,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props,r=t.players,a=t.startRound,!Object(o.isEmpty)(r.gameSchema)&&null!=r.gameSchema.currentPlayer){e.next=6;break}console.log("ERROR"),n.toggleState("chooseHeroModal"),e.next=13;break;case 6:return a(!0),c=n.props.players,e.next=10,c.gameSchema.players[c.gameSchema.currentPlayer].bafsObj.extraPercent;case 10:i=e.sent,n.setState(d({},n.state,{percentage:n.state.percentage+i})),n.startCounter();case 13:case"end":return e.stop()}}),e)})))),S(v(n),"startCounter",(function(){var e=3;setInterval((function(){e>0&&(e-=1,n.setState(d({},n.state,{currentPlayer:n.props.players.gameSchema.currentPlayer,gameStartCounter:e})))}),900)})),S(v(n),"plusPercent",y(regeneratorRuntime.mark((function e(){var t,r,a,c,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.state,r=t.percentage,a=t.activeClickPlace,t.bonus,c=n.props.players,o=c.gameSchema.players[c.gameSchema.currentPlayer].atack,i=r+parseInt(o)+n.state.bonus.atack,a&&n.setState(d({},n.state,{gameResult:d({},n.state.gameResult,{clicks:n.state.gameResult.clicks+1}),percentage:i}),(function(){n.state.percentage>=100&&n.endRound(!0)}));case 5:case"end":return e.stop()}}),e)})))),S(v(n),"resetIntervalFunc",(function(e){clearInterval(e)})),S(v(n),"minusPercent",function(){var e=y(regeneratorRuntime.mark((function e(t,r){var a,c,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.state,c=a.percentage,o=a.bonus,c<=0&&n.endRound(!1),e.next=4,setInterval((function(){c>0&&c<100&&n.setState(d({},n.state,{minusPercentintervalResetFunc:i,percentage:n.state.percentage-(n.state.activeClickPlace?t.toFixed(2):0)}),(function(){n.state.percentage<=0&&n.endRound(!1)}))}),1e3*r+100*parseInt(o.speed));case 4:i=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),S(v(n),"endRound",(function(e){var t=n.state.timer,r=t.mills,a=t.secs,c=t.mins,o=n.props,i=o.players,s=o.writeRoundStatistic,u=o.startRound,l=n.state.gameResult;n.resetIntervalFunc(n.state.minusPercentintervalResetFunc),n.resetIntervalFunc(n.state.startIntervalResetFunc),l.status=e,l.time=c+":"+a+":"+r,n.setState({gameStartCounter:3,activeClickPlace:!1,timer:{on:!1,mills:0,mins:0,secs:0},percentage:50,gameResult:{status:null,clicks:0,time:null},FortuneModal:!0},y(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!1),e.next=3,s(i.gameSchema.currentPlayer,l,i.gameSchema.circle);case 3:n.checkCircle(l.status);case 4:case"end":return e.stop()}}),e)}))))})),S(v(n),"checkCircle",function(){var e=y(regeneratorRuntime.mark((function e(t){var r,a,c,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props,a=r.players,c=r.resetCircle,o=r.minusHealth,i=r.checkPlayers,a.gameSchema.players.length!==a.gameSchema.playedPlayers.length+a.gameSchema.diedPlayers.length){e.next=5;break}return e.next=4,c();case 4:i();case 5:if(e.t0=!t,!e.t0){e.next=9;break}return e.next=9,o(n.state.currentPlayer,1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),S(v(n),"activateZone",y(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.setState(d({},n.state,{activeClickPlace:!0}),(function(){var e=n.props.players.gameSchema.circle/10+.15;n.minusPercent(5+(n.props.players.gameSchema.circle+.1+.3),1-(e>-.1?e:.1)),n.setBonuses(),n.toggleTimer(!0)})));case 1:case"end":return e.stop()}}),e)})))),S(v(n),"toggleTimer",(function(e){n.setState(d({},n.state,{timer:d({},n.state.timer,{on:e||!n.state.timer.on})}),(function(){n.state.timer.on&&n.startTimer()}))})),S(v(n),"startTimer",(function(){var e=0,t=0,r=0,a=setInterval((function(){100===t?(e+=1,t=0,t+=10):t+=10,60===e&&(r+=1,e=0),n.state.timer.on&&n.setState(d({},n.state,{startIntervalResetFunc:a,timer:d({},n.state.timer,{secs:e,mills:t,mins:r})}))}),100)})),S(v(n),"toggleState",(function(e){n.setState(d({},n.state,S({},e,!n.state[e])))})),n.state={chooseHeroModal:!1,road:null,bonus:{atack:0,speed:0,percent:0},currentPlayer:null,percentage:50,activeClickPlace:!1,FortuneModal:!1,gameResult:{status:null,clicks:0,time:null},timer:{on:!1,mills:0,secs:0,mins:0},colors:{1:"bg-success",2:"bg-warning",3:"bg-primary"},gameStartCounter:3},n}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.setState(d({},this.state,{percentage:50,gameStartCounter:3,road:Object(p.c)(1,13)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.gameStartCounter,r=t.colors,c=t.percentage,i=t.bonus,p=t.activateZone,m=t.activeClickPlace,f=t.FortuneModal,d=t.timer,h=t.chooseHeroModal,y=t.road,b=this.props.players;return a.a.createElement("div",{className:"game ".concat(b.gameSchema.activeGame&&"full-window")},b.gameSchema.gameOver&&a.a.createElement(O,null),b.gameSchema.activeGame&&n>=1&&a.a.createElement("div",{className:"game-bg ".concat(r[n])},a.a.createElement("div",{className:"game-start-counter"},n>0?n:"GO!")),b.gameSchema.activeGame&&n<1&&!b.gameSchema.gameOver&&a.a.createElement("div",{className:"click-place road-bg _".concat(y+1),onClick:function(){return m?e.plusPercent():e.activateZone()}},a.a.createElement("p",null,c," ====",i.percent),a.a.createElement("p",null,c),a.a.createElement(P,{percentage:c+i.percent,activateZone:p}),a.a.createElement("p",{className:"game-time"},d.mins+" - "+d.secs+" - "+d.mills)),Object(o.isEmpty)(b.gameSchema.players)&&a.a.createElement(s.a,{to:"/"}),!b.gameSchema.activeGame&&!b.gameSchema.gameOver&&!Object(o.isEmpty)(b.gameSchema)&&a.a.createElement("button",{className:"btn _custom-width",onClick:function(){return e.startRound()}},a.a.createElement("label",{className:"btn-bg"}),a.a.createElement("span",null,"GO!!")),a.a.createElement(u.a,{isOpen:f},a.a.createElement(u.d,null,"Do you want to spin a cube for some bonus?"),a.a.createElement(u.b,null),a.a.createElement(u.c,null,a.a.createElement(l.a,{to:"/ff"},"SPIN"),a.a.createElement("button",{color:"secondary",onClick:function(){return e.toggleState("FortuneModal")}},"NO !"))),a.a.createElement(u.a,{isOpen:h},a.a.createElement(u.d,null,"Please!!!!"),a.a.createElement(u.b,null,a.a.createElement("p",{className:"russian-text"},"Выбери своего персонажа."),a.a.createElement("p",{className:"russian-text"},"Просто жмакни на свою иконку сверху в меню. ОК?")),a.a.createElement(u.c,null,a.a.createElement("button",{onClick:function(){return e.toggleState("chooseHeroModal")}},"OK"))))}}])&&b(n.prototype,r),c&&b(n,c),t}(r.Component);t.default=Object(c.b)((function(e){return{players:e.players}}),{startRound:i.i,writeRoundStatistic:i.j,resetCircle:i.c,checkPlayers:i.a,minusHealth:i.b})(j)}}]);
//# sourceMappingURL=5.index_bundle.js.map